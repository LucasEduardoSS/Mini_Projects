#:include custom_rules.kv
#:include menu_add_person.kv

Main:
    MenuScreenManager:
        size_hint: None, 1
        width: 300

        MainMenu:
        RecordsMenu:
        AddRecordMenu:
        AddPersonMenu:
        AddTaskMenu:
        RemoveRecordMenu:
        RemovePersonMenu:
        RemoveTaskMenu:
        AlterRecordMenu:
        AlterPersonMenu:
        AlterTaskMenu:
        ViewMenu:

    GridLayout:
        pos: 300, 0
        cols: 1

        CustomLabel:
            text: "As divisões aparecerão aqui"
            color: 0, 0, 0

            size_hint: None, 1
            size: root.width - 300, root.height
            background_color: 1, 0, 0, .2
    
    # Esse menu não aparecerá
    MenuAddPerson:

<MainMenu>:
    name: "main_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5

        CustomButton:
            id: btn_dividirTarefas
            text: "Dividir *"
            on_release:
                root.divideTasks()

        CustomButton:
            id: btn_registros
            text: "Registros"
            on_release:
                root.parent.current = "regs_menu"
                root.manager.transition.direction = "left"
                root.on_press_records()

        CustomButton:
            id: btn_encerrar
            text: "Encerrar"
            color: 1, 1, 1, .8
            background_color: .95, .27, .27, .95
            on_release:
                app.stop()

        CustomLabel:
            text: "Desenvolvido por Lucas Eduardo"
            color: 0, 0, 0
            text_size: self.width, self.height
            font_size: 14

            valign: 'bottom'
            halign: 'center'
            background_normal: ''
            background_color: 1, 1, 1
            size_hint_x: 1
            padding_y: 30

<RecordsMenu>
    name: "regs_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5

        CustomButton:
            text: "Visualizar"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "view_menu"

        CustomButton:
            text: "Alterar"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = 'alter_record_menu'

        CustomButton:
            text: "Adicionar"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "add_record_menu"
        
        CustomButton:
            text: "Remover"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "remove_record_menu"

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "main_menu"

<AddRecordMenu>
    name: "add_record_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5

        CustomButton:
            text: "Adicionar Pessoa"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "add_person_menu"
        
        CustomButton:
            text: "Adicionar Tarefa"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "add_task_menu"

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "regs_menu"

<AddPersonMenu>
    name: "add_person_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5
        
        CustomTextInput:
            id: nome_value  # A id não pode ser uma string
            text:'Nome'
        
        CustomTextInput:
            id: cargo_value  # A id não pode ser uma string
            text:'Cargo'

        CustomButton:
            text: "Confirmar"
            on_release:
                root.add_person(nome_value.text, cargo_value.text)

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "add_record_menu"

<AddTaskMenu>
    name: "add_task_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5
        
        CustomTextInput:
            id: nome_value  # A id não pode ser uma string
            text:'Nome'
        
        CustomTextInput:
            id: peso_value  # A id não pode ser uma string
            text:'Peso'

        CustomButton:
            text: "Confirmar"
            on_release:
                root.add_task(nome_value.text, peso_value.text)

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "add_record_menu"

<RemoveRecordMenu>
    name: "remove_record_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5

        CustomButton:
            text: "Remover Pessoa"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "remove_person_menu"

        CustomButton:
            text: "Remover Tarefa"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "remove_task_menu"

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "regs_menu"

<RemovePersonMenu>
    name: "remove_person_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5
            
        CustomTextInput:
            id: Id_value  # A id não pode ser uma string
            text:'ID'

        CustomButton:
            text: "Confirmar"
            on_release:
                root.remove_person(Id_value.text)

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "remove_record_menu"

<RemoveTaskMenu>
    name: "remove_task_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5
            
        CustomTextInput:
            id: Id_value  # A id não pode ser uma string
            text:'ID'

        CustomButton:
            text: "Confirmar"
            on_release:
                root.remove_task(Id_value.text)

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "remove_record_menu"

<AlterRecordMenu>
    name: "alter_record_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5

        CustomButton:
            text: "Alterar Pessoa"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "alter_person_menu"

        CustomButton:
            text: "Alterar Tarefa"
            on_release:
                root.manager.transition.direction = 'left'
                root.parent.current = "alter_task_menu"

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "regs_menu"

<AlterPersonMenu>
    name: "alter_person_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5
            
        CustomTextInput:
            id: id_value  # A id não pode ser uma string
            text:'ID'
        
        CustomTextInput:
            id: nome_value  # A id não pode ser uma string
            text:'Nome'
        
        CustomTextInput:
            id: cargo_value  # A id não pode ser uma string
            text:'Cargo'

        CustomLabel2:
            text: 'Preencha somente os campos que deseja alterar'

        CustomButton:
            text: "Confirmar"
            on_release:
                root.alter_person(id_value.text, nome_value.text, cargo_value.text)

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "alter_record_menu"

<AlterTaskMenu>
    name: "alter_task_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5
            
        CustomTextInput:
            id: id_value  # A id não pode ser uma string
            text:'ID'
        
        CustomTextInput:
            id: nome_value  # A id não pode ser uma string
            text:'Nome'
        
        CustomTextInput:
            id: peso_value  # A id não pode ser uma string
            text:'Peso'

        CustomLabel2:
            text: 'Preencha somente os campos que deseja alterar'

        CustomButton:
            text: "Confirmar"
            on_release:
                root.alter_task(id_value.text, nome_value.text, peso_value.text)

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "alter_record_menu"

<ViewMenu>
    name: "view_menu"

    GridLayout:
        cols: 1
        size_hint: None, 1
        width: 300
        padding: 10
        spacing: 5

        CustomButton:
            text: "Visualizar Pessoas"
            on_release:
                root.view_people()
        
        CustomButton:
            text: "Visualizar Tarefas"
            on_release:
                root.view_tasks()

        CustomButton:
            text: "Visualizar Tudo"
            on_release:
                root.view_all()

        CustomButton:
            text: "< Voltar"
            background_color: 1, 1, 0, 0.5
            on_release:
                root.manager.transition.direction = 'right'
                root.parent.current = "regs_menu"